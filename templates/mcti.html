{% extends "base.html" %}

{% block title %}Catálogo de Deteções MCTI{% endblock %}

{% block content %}
<div class="mb-4">
    <h1 class="display-5 fw-bold m-0">Catálogo de Deteções MCTI</h1>
</div>

<div class="text-light text-center mb-4">
    <small>
        <i class="fas fa-info-circle me-2"></i>
        Dados fornecidos pela <a href="https://iasc.cosmosearch.org/" target="_blank" rel="noopener noreferrer" class="link-light fw-bold">International Astronomical Search Collaboration (IASC)</a>.
    </small>
</div>

<ul class="nav nav-tabs">
    <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#preliminares">Listas Preliminares</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#provisorias">Designações Provisórias</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#fracas">Deteções Fracas</a>
    </li>
</ul>

<div class="tab-content">

    <div class="tab-pane fade show active" id="preliminares">
        <div class="main-card mt-3">
            <h1 class="display-6 mb-4">Listas de Preliminares</h1>
            <p class="text-secondary">Selecione o Ano e a Campanha que deseja visualizar.</p>
        
            <form id="mcti-search-form" class="row g-3 align-items-end mb-5">
                <div class="col-md-5">
                    <label for="filtro-ano" class="form-label">Ano</label>
                    <select id="filtro-ano" class="form-select" disabled>
                        <option selected value="">Carregando Anos...</option>
                    </select>
                </div>
                <div class="col-md-5">
                    <label for="filtro-campanha" class="form-label">Campanha</label>
                    <select id="filtro-campanha" class="form-select" disabled>
                        <option selected value="">Selecione uma Campanha...</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-search me-2"></i>Buscar
                    </button>
                </div>
            </form>
        </div>
        
        <div class="results-card d-none" id="mcti-results-card">
            <div class="results-header d-flex justify-content-between align-items-center gap-3">
                <div>
                    <h4 class="mb-0">Resultados da Campanha</h4>
                    <span class="badge bg-secondary fw-normal" id="mcti-results-count">0 encontrados</span>
                </div>
                <div class="ms-auto w-50" style="max-width: 400px;">
                    <input type="search" id="keyword-search-input" class="form-control" placeholder="Filtrar resultados por palavra-chave...">
                </div>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead id="mcti-table-head">
                        </thead>
                    <tbody id="mcti-table-body">
                        </tbody>
                </table>
            </div>
            <div id="mcti-empty-message" class="text-center p-5 d-none">
                <h5 class="text-secondary">Nenhum resultado encontrado para a campanha selecionada.</h5>
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="provisorias">
        <div class="main-card mt-3 text-center">
            <h4 class="text-info">Em Breve</h4>
            <p class="text-secondary">Esta área listará os objetos que receberam designações provisórias do Minor Planet Center.</p>
        </div>
    </div>

    <div class="tab-pane fade" id="fracas">
        <div class="main-card mt-3 text-center">
            <h4 class="text-info">Em Breve</h4>
            <p class="text-secondary">Esta área listará as deteções consideradas fracas (faint detections) pelo Minor Planet Center.</p>
        </div>
    </div>

</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/mcti_manager.js') }}"></script>
{% endblock %}